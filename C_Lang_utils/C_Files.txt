
--------------------------------------------------------------------------------------
##Read csv files

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Define a struct to hold data for each row
typedef struct {
    char name[50];
    int age;
    char city[50];
} Person;

int main() {
    FILE *file;
    char line[256]; // Buffer to hold each line
    const char *filename = "data.csv";
    Person people[100]; // Array to store Person structs
    int count = 0; // Number of people read

    // Open the CSV file
    file = fopen(filename, "r");
    if (file == NULL) {
        perror("Error opening file");
        return 1;
    }

    // Read and discard the header line if present
    fgets(line, sizeof(line), file); 

    // Read data line by line
    while (fgets(line, sizeof(line), file) != NULL && count < 100) {
        char *token;

        // Extract name
        token = strtok(line, ",");
        if (token != NULL) {
            strcpy(people[count].name, token);
        }

        // Extract age
        token = strtok(NULL, ",");
        if (token != NULL) {
            people[count].age = atoi(token);
        }

        // Extract city (remove newline character if present)
        token = strtok(NULL, "\n"); 
        if (token != NULL) {
            strcpy(people[count].city, token);
        }
        
        count++;
    }

    // Close the file
    fclose(file);

    // Print the read data
    printf("Data from CSV:\n");
    for (int i = 0; i < count; i++) {
        printf("Name: %s, Age: %d, City: %s\n", people[i].name, people[i].age, people[i].city);
    }

    return 0;
}

##data.csv
Name,Age,City
Alice,30,New York
Bob,24,London
Charlie,35,Paris
=================================

// Source - https://stackoverflow.com/questions/12911299/read-csv-file-in-c
// Posted by sehe
// Retrieved 11/5/2025, License - CC-BY-SA 4.0

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char* getfield(char* line, int num)
{
    const char* tok;
    for (tok = strtok(line, ";");
            tok && *tok;
            tok = strtok(NULL, ";\n"))
    {
        if (!--num)
            return tok;
    }
    return NULL;
}

int main()
{
    FILE* stream = fopen("input", "r");

    char line[1024];
    while (fgets(line, 1024, stream))
    {
        char* tmp = strdup(line);
        printf("Field 3 would be %s\n", getfield(tmp, 3));
        // NOTE strtok clobbers tmp
        free(tmp);
    }
}

data:
lp;imie;nazwisko;ulica;numer;kod;miejscowosc;telefon;email;data_ur
1;Jan;Kowalski;ul. Nowa;1a;11-234;Budry;123-123-456;jan@go.xxx;1980.05.13
2;Jerzy;Nowak;ul. Konopnicka;13a/3;00-900;Lichowice;(55)333-44-55;jer@wu.to;1990.03.23
--------------------------------------------------------------------------------------

C program to write all the members of an array of structures to a file using fwrite(). Read the array from the file and display on the screen.

#include <stdio.h>
struct student
{
   char name[50];
   int height;
};
int main(){
    struct student stud1[5], stud2[5];   
    FILE *fptr;
    int i;

    fptr = fopen("file.txt","wb");
    for(i = 0; i < 5; ++i)
    {
        fflush(stdin);
        printf("Enter name: ");
        gets(stud1[i].name);

        printf("Enter height: "); 
        scanf("%d", &stud1[i].height); 
    }

    fwrite(stud1, sizeof(stud1), 1, fptr);
    fclose(fptr);

    fptr = fopen("file.txt", "rb");
    fread(stud2, sizeof(stud2), 1, fptr);
    for(i = 0; i < 5; ++i)
    {
        printf("Name: %s\nHeight: %d", stud2[i].name, stud2[i].height);
    }
    fclose(fptr);
}	

--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------	
	